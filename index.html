<!DOCTYPE html>
<html lang="ms">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sistem e-BIG IPGKDA 30.0</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body { font-family: Arial, sans-serif; margin: 20px; }
button { padding: 8px 12px; margin: 5px; cursor: pointer; }
#loader {
    display: none;
    font-weight: bold;
    color: blue;
}
</style>
</head>

<body>

<h2>Sistem e-BIG IPGKDA 30.0</h2>

<div id="loginSection">
    <button onclick="login('lecturer')">Login Pensyarah</button>
</div>

<div id="loader">Menyusun Data Analisis...</div>

<div id="content"></div>

<script>

// âœ… URL telah diperbetulkan
const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbzQrapAeIyyzEOFzJEBtdfP2PN1iAd3wki-SPnzrPr5zRotSd0EgOh3YGDuE_Bszhob/exec";

function showLoader(status) {
    document.getElementById("loader").style.display = status ? "block" : "none";
}

function login(mode) {

    showLoader(true);

    const bodyData = {
        action: "login",
        role: mode
    };

    fetch(WEB_APP_URL, {
        method: "POST",
        body: JSON.stringify(bodyData)
    })
    .then(response => response.json())
    .then(res => {
        showLoader(false);

        if (res.result === "success") {
            loadLecturerView(res);
        } else {
            alert(res.message || "Login gagal.");
        }
    })
    .catch(error => {
        showLoader(false);
        alert("Ralat sambungan ke server.");
        console.error(error);
    });
}

function loadLecturerView(data) {
    document.getElementById("content").innerHTML =
        "<h3>Selamat Datang Pensyarah</h3><p>Data berjaya dimuatkan.</p>";
}

</script>

</body>
</html>
